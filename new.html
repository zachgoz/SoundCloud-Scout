<!DOCTYPE html>
<html lang="en">
  <head>
  	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  	<script src="http://connect.soundcloud.com/sdk.js"></script>
  	<script>
  	SC.initialize({client_id: 'a9ab68717b53a7f76ffe988af3972cc4'});
	function updateLinks(){
		$(function(){
	    	$(".soundcloud-link").click(function(e){
		        e.preventDefault();
		        SC.oEmbed($(this).attr("href"), {auto_play: true}, $(".player").get(0));
			});
		 });
	}
	function getTracks(){
		query = document.getElementById('search').value;
		SC.get('/tracks', { q: query}, function(tracks) {
			console.log(tracks);
			song = tracks[0];
			length = tracks.length;
			printed = 0
			//Print the titles of the returned songs
			document.getElementById('songs').innerHTML = "";
			while(printed < length){
				document.getElementById('songs').innerHTML 
				+= '<a href="' + tracks[printed].permalink_url + '" class="soundcloud-link"> ' + tracks[printed].title + '</a><br />';
		  		printed = printed + 1;

	 		}
			updateLinks();
			
		});
	}
	
	</script>
  </head>
  <body>
   	<form action="javascript:getTracks()">
		Search: <input type="text" name = "search" id = "search">
	<input type="submit" value="Submit">
	</form>
	<div class="player"></div>
	<div id="songs"></div>

  </body>
</html>
